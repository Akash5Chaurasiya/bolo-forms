{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\bolo\\\\react-form-builder\\\\frontend\\\\src\\\\pages\\\\FormResponsePage\\\\FormResponse.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { history } from \"../../store/config\";\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\nimport formActions from \"./../../store/actions/formActions\";\nimport \"./FormResponse.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst FormResponse = () => {\n  _s();\n\n  let {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const {\n    data: form\n  } = useSelector(state => state.form);\n  const {\n    action\n  } = useSelector(state => state.form);\n  const [response, setResponse] = useState({});\n  const [isError, setIsError] = useState(false);\n  useEffect(() => {\n    dispatch(formActions.getForm(id));\n  }, [id]);\n  useEffect(() => {\n    if (action === formActions.SAVE_RESPONSE_SUCCESS) {\n      history.go(-1);\n    }\n  }, [action]);\n\n  const saveResponse = () => {\n    let filteredResponse = filterResponse();\n    let finalResponseObj;\n\n    if (Object.keys(filteredResponse).length) {\n      finalResponseObj = {\n        id,\n        response: filteredResponse\n      };\n      dispatch(formActions.saveResponse(finalResponseObj));\n      setIsError(false);\n    } else {\n      setIsError(true);\n    }\n  };\n\n  const filterResponse = () => {\n    let filteredObj = { ...response\n    };\n\n    for (let key in filteredObj) {\n      if (filteredObj.hasOwnProperty(key)) {\n        if (filteredObj[key] == \"\" || typeof filteredObj[key] === \"object\" && Object.keys(filteredObj[key]).length <= 0) {\n          delete filteredObj[key];\n        }\n      }\n    }\n\n    return filteredObj;\n  };\n\n  const handleOnChange = function (e, que) {\n    let index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    let responseObj = { ...response\n    };\n    let ans;\n\n    if (que.type === \"1\" || que.type === \"3\") {\n      ans = e.target.value;\n      responseObj[que.id] = ans;\n    } else if (que.type === \"2\") {\n      ans = e.target.checked;\n\n      if (ans) {\n        responseObj[que.id] = { ...responseObj[que.id],\n          [index]: e.target.value\n        };\n      } else {\n        delete responseObj[que.id][index];\n      }\n    }\n\n    setResponse(responseObj);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container\",\n      onFocus: () => setIsError(false),\n      children: [form.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-header\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"response-form-title\",\n            children: form[0].formJson.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }, this), form[0].formJson.body.map((que, index) => {\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"question\",\n              children: [\" \", `${que.id}. ${que.question}`, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(CustomInput, {\n              que: que,\n              onChange: (e, que, index) => handleOnChange(e, que, index)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 10\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 9\n          }, this);\n        })]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"save-response-btn btn\",\n          onClick: () => saveResponse(),\n          children: \"Save Response\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), isError && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error error-message\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" Please enter response!!! \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FormResponse, \"pXktpDbyN/oDY4GytKOy7FMNMd4=\", false, function () {\n  return [useParams, useDispatch, useSelector, useSelector];\n});\n\n_c = FormResponse;\nexport default FormResponse;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormResponse\");","map":{"version":3,"sources":["C:/Users/Dell/Desktop/bolo/react-form-builder/frontend/src/pages/FormResponsePage/FormResponse.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useParams","history","CustomInput","formActions","FormResponse","id","dispatch","data","form","state","action","response","setResponse","isError","setIsError","getForm","SAVE_RESPONSE_SUCCESS","go","saveResponse","filteredResponse","filterResponse","finalResponseObj","Object","keys","length","filteredObj","key","hasOwnProperty","handleOnChange","e","que","index","responseObj","ans","type","target","value","checked","formJson","title","body","map","question"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { history } from \"../../store/config\";\r\nimport CustomInput from \"../../components/CustomInput/CustomInput\";\r\nimport formActions from \"./../../store/actions/formActions\";\r\nimport \"./FormResponse.css\";\r\n\r\nconst FormResponse = () => {\r\n\tlet { id } = useParams();\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst { data: form } = useSelector((state) => state.form);\r\n\tconst { action } = useSelector((state) => state.form);\r\n\tconst [response, setResponse] = useState({});\r\n\tconst [isError, setIsError] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(formActions.getForm(id));\r\n\t}, [id]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (action === formActions.SAVE_RESPONSE_SUCCESS) {\r\n\t\t\thistory.go(-1);\r\n\t\t}\r\n\t}, [action]);\r\n\r\n\tconst saveResponse = () => {\r\n\t\tlet filteredResponse = filterResponse();\r\n\t\tlet finalResponseObj;\r\n\t\tif (Object.keys(filteredResponse).length) {\r\n\t\t\tfinalResponseObj = {\r\n\t\t\t\tid,\r\n\t\t\t\tresponse: filteredResponse,\r\n\t\t\t};\r\n\t\t\tdispatch(formActions.saveResponse(finalResponseObj));\r\n\t\t\tsetIsError(false);\r\n\t\t} else {\r\n\t\t\tsetIsError(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst filterResponse = () => {\r\n\t\tlet filteredObj = { ...response };\r\n\t\tfor (let key in filteredObj) {\r\n\t\t\tif (filteredObj.hasOwnProperty(key)) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tfilteredObj[key] == \"\" ||\r\n\t\t\t\t\t(typeof filteredObj[key] === \"object\" && Object.keys(filteredObj[key]).length <= 0)\r\n\t\t\t\t) {\r\n\t\t\t\t\tdelete filteredObj[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn filteredObj;\r\n\t};\r\n\r\n\tconst handleOnChange = (e, que, index = -1) => {\r\n\t\tlet responseObj = { ...response };\r\n\t\tlet ans;\r\n\t\tif (que.type === \"1\" || que.type === \"3\") {\r\n\t\t\tans = e.target.value;\r\n\t\t\tresponseObj[que.id] = ans;\r\n\t\t} else if (que.type === \"2\") {\r\n\t\t\tans = e.target.checked;\r\n\t\t\tif (ans) {\r\n\t\t\t\tresponseObj[que.id] = { ...responseObj[que.id], [index]: e.target.value };\r\n\t\t\t} else {\r\n\t\t\t\tdelete responseObj[que.id][index];\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetResponse(responseObj);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"form-container\" onFocus={() => setIsError(false)}>\r\n\t\t\t\t{form.length > 0 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className=\"form-header\">\r\n\t\t\t\t\t\t\t<span className=\"response-form-title\">{form[0].formJson.title}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{form[0].formJson.body.map((que, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t\t\t\t\t<p className=\"question\"> {`${que.id}. ${que.question}`} </p>\r\n\t\t\t\t\t\t\t\t\t<CustomInput que={que} onChange={(e, que, index) => handleOnChange(e, que, index)} />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className=\"form-footer\">\r\n\t\t\t\t\t<button className=\"save-response-btn btn\" onClick={() => saveResponse()}>\r\n\t\t\t\t\t\tSave Response\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{isError && (\r\n\t\t\t\t<p className=\"error error-message\">\r\n\t\t\t\t\t<span> Please enter response!!! </span>\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default FormResponse;\r\n"]},"metadata":{},"sourceType":"module"}